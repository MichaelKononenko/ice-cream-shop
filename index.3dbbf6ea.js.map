{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_array_with_holes.js","node_modules/@swc/helpers/lib/_non_iterable_rest.js","node_modules/@swc/helpers/lib/_sliced_to_array.js","src/js/videotube.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _arrayWithHoles;\nfunction _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _nonIterableRest;\nfunction _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _slicedToArray;\nvar _arrayWithHoles = _interopRequireDefault(require(\"./_array_with_holes\"));\nvar _iterableToArray = _interopRequireDefault(require(\"./_iterable_to_array\"));\nvar _nonIterableRest = _interopRequireDefault(require(\"./_non_iterable_rest\"));\nvar _unsupportedIterableToArray = _interopRequireDefault(require(\"./_unsupported_iterable_to_array\"));\nfunction _slicedToArray(arr, i) {\n    return (0, _arrayWithHoles).default(arr) || (0, _iterableToArray).default(arr, i) || (0, _unsupportedIterableToArray).default(arr, i) || (0, _nonIterableRest).default();\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","(() => {\n\tconst throttle = (type, name, obj) => {\n\t\tobj = obj || window;\n\t\tlet running = false;\n\t\tconst func = function() {\n\t\t\tif (running) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trunning = true;\n\t\t\trequestAnimationFrame(function() {\n\t\t\t\tobj.dispatchEvent(new CustomEvent(name));\n\t\t\t\trunning = false;\n\t\t\t});\n\t\t};\n\t\tobj.addEventListener(type, func);\n\t};\n\n\tthrottle(\"resize\", \"optimizedResize\");\n})();\n\n((obj) => {\n\tobj = obj || window;\n\tobj.animation = function(elem, prop, cb) {\n\t\tconst count = prop.count;\n\t\tlet counter = 0\n\t\tif (prop.start) {\n\t\t\tprop.start.forEach(item => {\n\t\t\t\telem.style[item[0]] = item[1]\n\t\t\t})\n\t\t}\n\n\t\tconst allAnimation = [];\n\n\t\tprop.anim.forEach(([style, from, to]) => {\n\t\t\tconst max = Math.max(from, to);\n\t\t\tconst min = Math.min(from, to);\n\t\t\tconst step = (max - min) / count;\n\t\t\tallAnimation.push({style, from, to, step, reverse: min === to})\n\t\t});\n\n\n\t\tconst rafAnimation = () => {\n\n\t\t\tallAnimation.forEach((item) => {\n\t\t\t\tif (item.reverse) {\n\t\t\t\t\titem.from -= item.step\n\t\t\t\t} else {\n\t\t\t\t\titem.from += item.step\n\t\t\t\t}\n\n\t\t\t\telem.style[item.style] = item.from;\n\t\t\t})\n\n\t\t\tcounter++;\n\t\t\tif (counter < count) {\n\n\t\t\t\trequestAnimationFrame(rafAnimation);\n\t\t\t} else {\n\t\t\t\tif (prop.end) {\n\t\t\t\t\tprop.end.forEach(item => {\n\t\t\t\t\t\telem.style[item[0]] = item[1]\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (cb) cb();\n\t\t\t}\n\n\n\t\t}\n\t\trequestAnimationFrame(rafAnimation);\n\t};\n})();\n\n\nconst init = () => {\n\n\tconst overlay = document.createElement('div');\n\toverlay.className = 'videotube-modal-overlay'\n\tdocument.body.insertAdjacentElement('beforeend', overlay);\n\n\tconst video = document.createElement('div');\n\tvideo.id = 'videotube-modal-container'\n\n\tconst sizeBlockList = [\n\t\t[3840, 2160],\n\t\t[2560, 1440],\n\t\t[1920, 1080],\n\t\t[1280, 720],\n\t\t[854, 420],\n\t\t[640, 360],\n\t\t[426, 240]\n\t];\n\n\n\tconst sizeVideo = () => {\n\t\tconst sizeBlock = sizeBlockList.find(item => item[0] < window.visualViewport.width) ||\n\t\t\tsizeBlockList[sizeBlockList.length - 1];\n\n\t\tconst iframe = document.getElementById('videotube-modal');\n\t\tiframe.width = sizeBlock[0];\n\t\tiframe.height = sizeBlock[1];\n\t\tvideo.style.cssText = `\n\t\t\twidth: ${sizeBlock[0]};\n\t\t\theight: ${sizeBlock[1]};\n\t\t`;\n\n\t}\n\n\tconst sizeContainer = () => {\n\n\t\tconst wh = window.visualViewport.height;\n\t\tconst ww = window.visualViewport.width;\n\t\tconst fw = video.style.width;\n\t\tconst fh = video.style.height;\n\n\t\tvideo.style.left = (ww - fw) / 2;\n\t\tvideo.style.top = (wh - fh) / 2;\n\t\toverlay.style.height = document.documentElement.clientHeight;\n\t}\n\n\tconst sizeVideoTubeModal = () => {\n\t\tsizeContainer();\n\t\tsizeVideo();\n\t}\n\n\tconst closeVideoTubeModal = () => {\n\n\t\tanimation(overlay, {\n\t\t\t\tend: [['display', 'none']],\n\t\t\t\tanim: [['opacity', 1, 0]],\n\t\t\t\tcount: 20,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\toverlay.textContent = \"\";\n\t\t\t}\n\t\t);\n\t\twindow.removeEventListener(\"optimizedResize\", sizeVideoTubeModal);\n\t\tdocument.removeEventListener('keyup', closeContainerEsc);\n\t}\n\n\tconst closeContainerEsc = e => {\n\t\tif (e.keyCode === 27) {\n\t\t\tcloseVideoTubeModal();\n\t\t}\n\t}\n\n\n\tconst openVideoTubeModal = e => {\n\t\t\tconst target = e.target.closest('.tube');\n\t\t\tif (!target) return;\n\n\t\t\tconst href = target.href;\n\t\t\tconst search = href.includes('youtube');\n\t\t\tlet idVideo = search ? href.match(/(\\?|&)v=([^&]+)/)[2] : href.match(/(\\.be\\/)([^&]+)/)[2];\n\n\t\t\tif (idVideo.length === 0) return;\n\n\t\t\te.preventDefault();\n\n\t\t\tanimation(overlay, {\n\t\t\t\t\tstart: [['display', 'block']],\n\t\t\t\t\tanim: [['opacity', 0, 1]],\n\t\t\t\t\tcount: 20,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\toverlay.insertAdjacentHTML('beforeend', `\n\t\t\t<div id=\"videotube-modal-loading\">Загрузка...</div>\n\t\t\t<div id=\"videotube-modal-close\">&#10006;</div>\n\t\t\t<div id=\"videotube-modal-container\">\n\t\t\t\t<iframe src=\"https://youtube.com/embed/${idVideo}?autoplay=1\" \n\t\t\t\t\tframeborder=\"0\"\n\t\t\t\t\tid=\"videotube-modal\" \n\t\t\t\t\tallowfullscreen\n\t\t\t\t\tallow=\"autoplay\">\n\t\t\t\t</iframe>\n\t\t\t</div>\n\t\t`)\n\n\t\t\tsizeVideo();\n\t\t\tsizeContainer();\n\n\t\t\twindow.addEventListener(\"optimizedResize\", sizeVideoTubeModal);\n\t\t\tdocument.addEventListener('keyup', closeContainerEsc);\n\t\t}\n\t;\n\n\n\toverlay.addEventListener(\"click\", closeVideoTubeModal);\n\tdocument.addEventListener('click', openVideoTubeModal)\n\n}\n\ndocument.addEventListener('DOMContentLoaded', init)\n"],"names":["Object","defineProperty","module","exports","value","default","arr","Array","isArray","TypeError","$111a013c31e2261e$exports","i","$111a013c31e2261e$var$_arrayWithHoles","$111a013c31e2261e$var$_iterableToArray","$111a013c31e2261e$var$_unsupportedIterableToArray","$111a013c31e2261e$var$_nonIterableRest","obj","$111a013c31e2261e$var$_interopRequireDefault","parcelRequire","__esModule","type","name","window","running","addEventListener","requestAnimationFrame","dispatchEvent","CustomEvent","throttle","animation","elem","prop","cb","count","counter","start","forEach","item","style","allAnimation","anim","param","_param","from","to","max","Math","min","step","push","reverse","rafAnimation","end","document","overlay","createElement","className","body","insertAdjacentElement","video","id","sizeBlockList","sizeVideo","sizeBlock","find","visualViewport","width","length","iframe","getElementById","height","cssText","concat","sizeContainer","wh","ww","fw","fh","left","top","documentElement","clientHeight","sizeVideoTubeModal","closeVideoTubeModal","textContent","removeEventListener","closeContainerEsc","e","keyCode","target","closest","href","idVideo","includes","match","preventDefault","insertAdjacentHTML"],"version":3,"file":"index.3dbbf6ea.js.map"}